(window["webpackJsonpjeojjang-web"]=window["webpackJsonpjeojjang-web"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a(20)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(2),s=a.n(l),i=a(3),u=a(1),m=(a(12),a(13),window.location.pathname.slice(1)),d="https://jeojjang.glitch.me/api",f="".concat(d,"/user/").concat(m),g="".concat(d,"/media/").concat(m,"?limit=25"),b="".concat(d,"/count/").concat(m,"?"),p="".concat(d,"/tags/").concat(m);function v(e,t){return fetch(e).then(function(e){return t?e.text():e.json()}).catch(console.error)}function h(){if(""!==m)return v(f)}function E(e){return y.apply(this,arguments)}function y(){return(y=Object(i.a)(s.a.mark(function e(t){var a,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=b,t&&(a+="&tags=".concat(t)),e.next=4,v(a,!0);case 4:return n=e.sent,e.abrupt("return",Math.ceil(n/25));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(s.a.mark(function e(){var t,a,n,r,c=arguments;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:1,a=c.length>1?c[1]:void 0,n=g,t&&(n+="&page=".concat(t)),a&&(n+="&tags=".concat(a)),e.next=7,v(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return",[]);case 10:return r=r.map(function(e){var t=e.id,a=e.link,n=e.tags,r=e.createdAt;return r=new Date(r),{id:t,link:a,tags:n,savedAt:"".concat(r.getMonth()+1,"/").concat(r.getDate(),"/")+r.getFullYear()}}),e.abrupt("return",r);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var w=window.location.origin+window.location.pathname,O=new URLSearchParams(window.location.search),k=O.get("tags"),x=O.get("page");function S(e){e?O.set("tags",e):O.delete("tags"),O.delete("page");var t=O.toString();R(w+(t?"?".concat(t):""))}function C(e){O.set("page",e),R(w+"?"+O.toString())}function R(e){window.location.href=e}function F(){return k||""}function I(){return x||1}function L(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useState)(),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)(),d=Object(u.a)(m,2),f=d[0],g=d[1],b=function(){var a=Object(i.a)(s.a.mark(function a(){var n,r,c;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,h();case 2:if(!(n=a.sent)){a.next=11;break}return r=n.tag,c=n.avatarURL,l(r),g(c),e.current.style="display: flex;",a.abrupt("return");case 11:t.current.className+=" justify-content-center";case 12:case"end":return a.stop()}},a)}));return function(){return a.apply(this,arguments)}}();Object(n.useEffect)(function(){b()},[]);var p=Object(n.useRef)();Object(n.useEffect)(function(){p.current.value=F()},[]);return r.a.createElement("div",{className:"header navbar navbar-expand sticky-top"},r.a.createElement("div",{className:"user",ref:e},r.a.createElement("img",{className:"avatar",src:f,alt:"User Avatar"}),r.a.createElement("h1",{className:"username"},o)),r.a.createElement("div",{className:"collapse navbar-collapse",ref:t},r.a.createElement("form",{className:"form-inline",id:"search",onSubmit:function(e){e.preventDefault(),S(e.target.firstChild.firstChild.value)}},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{className:"search-input form-control",type:"search","aria-label":"Search",autoFocus:!0,placeholder:"Search by tag/s...",spellCheck:"false",ref:p}),r.a.createElement("button",{className:"btn search-icon",form:"search"},r.a.createElement("img",{src:"search.svg",alt:"search icon"}))))))}a(14),a(15);var A=/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/i;function D(e){var t=e.match(A);return Object(u.a)(t,2)[1]}function M(e){var t=e.media,a=e.setClicked,c=t.link,o=Object(n.useRef)(),l=r.a.createElement("img",{className:"media",src:c,alt:"unsupported format"});if(c.includes("gfycat.com")&&!c.includes(".gif")){var s=c.match(/gfycat\.com\/(.+?)(?=$|[^a-z])/i),i=Object(u.a)(s,2)[1];l=r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"gif",src:"https://miro.medium.com/max/2048/1*aKQW5LeudHfno2eopICRBQ.png",alt:"gfycat icon"}),r.a.createElement("video",{className:"media",ref:o,loop:!0,preload:"metadata",muted:!0,src:"https://thumbs.gfycat.com/".concat(i,"-mobile.mp4"),onMouseOver:function(e){return e.target.play()},onMouseLeave:function(e){return e.target.pause()}}))}else if(c.match(/\.mp4|\.webm|\.mov/i))l=r.a.createElement("video",{className:"media",src:c,controls:!0,preload:"metadata",onClick:function(e){return e.preventDefault()},controlsList:"nofullscreen"});else if(c.match(/youtube\.com|youtu\.be/g)){var m=D(c);l=r.a.createElement("div",{className:"youtube"},r.a.createElement("img",{className:"youtube-icon",alt:"youtube icon",src:"youtube.svg"}),r.a.createElement("img",{className:"media",alt:"unsupported format",src:"https://i.ytimg.com/vi/".concat(m,"/hqdefault.jpg")}))}return r.a.createElement("div",{className:"media-container",title:"Click to enlarge",onClick:function(){o.current&&o.current.pause(),a(t)},"data-toggle":"modal","data-target":"#lightbox-modal"},l)}a(16),a(17);function B(e){var t=e.tags;return t?t.map(function(e){return r.a.createElement("div",{className:"tag clickable","data-dismiss":"modal",key:e,onClick:function(e){S(e.target.textContent)}},e)}):r.a.createElement(r.a.Fragment,null)}function T(e){var t=e.media,a=Object(n.useState)(!1),c=Object(u.a)(a,2),o=c[0],l=c[1],s=Object(n.useRef)();Object(n.useEffect)(function(){s.current&&new MutationObserver(function(e){var t=!0,a=!1,n=void 0;try{for(var r,c=function(){var e=r.value.target.className.includes("show");if(e)return{v:l(e)};setTimeout(function(){return l(e)},200)},o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=c();if("object"===typeof s)return s.v}}catch(i){a=!0,n=i}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}).observe(s.current,{attributes:!0,attributeFilter:["class"]})},[s]);var i=t?t.id:"",m=t?t.link:"",d=t?t.tags:[],f=t?t.savedAt:"",g=r.a.createElement("img",{className:"media",src:m,alt:"unsupported format"});if(m.includes("gfycat.com")&&!m.includes(".gif"))g=r.a.createElement("video",{className:"media",autoPlay:!0,loop:!0,preload:"metadata",src:m}),m=m.replace("giant.","").replace(".mp4","");else if(m.match(/\.mp4|\.webm/i))g=r.a.createElement("video",{className:"media",src:m,preload:"metadata",controls:!0});else if(m.match(/youtube\.com|youtu\.be/g)){var b=D(m);g=r.a.createElement("div",{className:"media"},r.a.createElement("iframe",{title:"youtube",frameBorder:"0",src:"https://www.youtube.com/embed/".concat(b),allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}))}return r.a.createElement("div",{className:"modal fade lightbox",id:"lightbox-modal",tabIndex:"-1",role:"dialog","aria-labelledby":"lightbox modal","aria-hidden":"true",ref:s},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-body"},o?g:r.a.createElement(r.a.Fragment,null),r.a.createElement("div",{className:"lightbox-info scrollable"},r.a.createElement("div",{className:"lightbox-info-section text-truncate"},"Tags"),r.a.createElement("hr",null),r.a.createElement("div",{className:"tags"},r.a.createElement(B,{tags:d})),r.a.createElement("hr",null),r.a.createElement("div",{className:"lightbox-info-section"},"Link ",r.a.createElement("a",{className:"text-truncate",rel:"noopener noreferrer",href:m,target:"_blank"},m)),r.a.createElement("hr",null),r.a.createElement("div",{className:"lightbox-info-section footer id"},"ID: ",i),r.a.createElement("div",{className:"lightbox-info-section footer saved-date"},"saved at ",f))))))}function U(e){var t=e.media,a=Object(n.useState)(),c=Object(u.a)(a,2),o=c[0],l=c[1];return r.a.createElement("div",{className:"gallery"},r.a.createElement(T,{media:o}),t?t.map(function(e){return r.a.createElement(M,{key:"".concat(e.id,"-").concat(e.link),media:e,setClicked:l})}):null)}a(18);function W(e){var t=e.pages;if(!t||1===t)return r.a.createElement("div",{className:"pager"});var a=parseInt(I()),n=a>1,c=a<t,o=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a+(e?c?1:a:n?-1:a);C(t)};return r.a.createElement("div",{className:"pager"},r.a.createElement("button",Object.assign({className:n?"":"disabled"},n?{}:{disabled:!0},{onClick:function(){return o(!1)}}),r.a.createElement("img",{src:"back.svg",alt:"back"})),a," / ",t,r.a.createElement("button",Object.assign({className:c?"":"disabled"},c?{}:{disabled:!0},{onClick:function(){return o()}}),r.a.createElement("img",{src:"forward.svg",alt:"forward"})))}a(19);function J(e){var t=e.media,a=Object(n.useState)([]),c=Object(u.a)(a,2),o=c[0],l=c[1],m=Object(n.useState)([]),d=Object(u.a)(m,2),f=d[0],g=d[1],b=Object(n.useRef)(),h=Object(n.useRef)(),E=function(){var e=Object(i.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(p);case 2:t=(t=e.sent).map(function(e){return e.name}).sort(function(e,t){return e.localeCompare(t)}),g(t),l(t);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){E()},[t]),Object(n.useEffect)(function(){b.current.oninput=function(e){var t=e.target.value,a=f.filter(function(e){return e.includes(t)});l(0!==a.length?a:f)}},[f]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"tags-button","data-toggle":"modal","data-target":"#tags-modal"},r.a.createElement("img",{src:"tags.svg",alt:"tags icon"})),r.a.createElement("div",{className:"modal fade",id:"tags-modal",tabIndex:"-1",role:"dialog",ref:h},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content tags"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title"},"All Tags (",f.length,")"),r.a.createElement("input",{className:"tags-search",type:"search",ref:b,placeholder:"Search tags...",autoFocus:!0}),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body scrollable"},r.a.createElement(B,{tags:o}))))))}o.a.render(r.a.createElement(function(){var e=Object(n.useState)(),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(),l=Object(u.a)(o,2),m=l[0],d=l[1],f=function(){var e=Object(i.a)(s.a.mark(function e(){var t,a,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=F(),a=I(),e.next=4,E(t);case 4:return n=e.sent,d(n),e.next=8,j(a,t);case 8:r=e.sent,c(r);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)(function(){f()},[c]),r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(U,{media:a}),r.a.createElement(W,{media:a,pages:m}),r.a.createElement(J,{media:a}))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[6,1,2]]]);
//# sourceMappingURL=main.f87e2353.chunk.js.map